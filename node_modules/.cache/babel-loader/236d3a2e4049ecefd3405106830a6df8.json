{"ast":null,"code":"import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,TextField}from\"@material-ui/core\";import React,{useState}from\"react\";import{showErrorToast,showSuccessToast}from\"../../components/common\";import{CommonController}from\"../../_redux/controller/common.controller\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangePassword=function ChangePassword(){var _useState=useState({oldpass:\"\",newpass:\"\",confpass:\"\",user_id:localStorage.getItem(\"userId\"),errors:{}}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleChange=function handleChange(event){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value)));};var validateForm=function validateForm(){var errors=_objectSpread({},formData.errors);if(formData.oldpass==\"\"){errors.oldpass=\"Please enter old password\";}else{delete errors.oldpass;}if(formData.newpass==\"\"){errors.newpass=\"Please enter new password\";}else{delete errors.newpass;}if(formData.confpass==\"\"){errors.confpass=\"Please enter confirm password\";}else{delete errors.confpass;}console.log(errors);setFormData(_objectSpread(_objectSpread({},formData),{},{errors:errors}));return Object.keys(errors).length!==0;};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);if(validateForm()){_context.next=5;break;}_context.next=5;return CommonController.commonApiCallFilter(\"Profile/UpdateEmployeePassword\",formData,\"post\").then(function(data){if(data.valid){showSuccessToast(\"Password changed successfully \");}else{showErrorToast(data.msg);}});case 5:setLoading(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);showErrorToast(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function onSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"card shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",value:formData.oldpass,name:\"oldpass\",type:\"password\",label:\"Old Password\",onChange:handleChange}),formData.errors&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-danger\",children:formData.errors.oldpass})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",name:\"newpass\",type:\"password\",value:formData.newpass,label:\"New Password\",onChange:handleChange}),formData.errors&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-danger\",children:formData.errors.newpass})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",name:\"confpass\",value:formData.confpass,label:\"Conf. Password\",onChange:handleChange}),formData.errors&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-danger\",children:formData.errors.confpass})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 mt-5\",children:/*#__PURE__*/_jsx(Button,{disable:loading,variant:\"contained\",onClick:onSubmit,disableElevation:true,color:\"primary\",children:loading?\"Processing...\":\"Update Password\"})})]})})});};export default ChangePassword;","map":{"version":3,"names":["Button","TextField","React","useState","showErrorToast","showSuccessToast","CommonController","ChangePassword","oldpass","newpass","confpass","user_id","localStorage","getItem","errors","formData","setFormData","loading","setLoading","handleChange","event","target","name","value","validateForm","console","log","Object","keys","length","onSubmit","commonApiCallFilter","then","data","valid","msg"],"sources":["F:/React code/diagnostic/src/pages/Profile/changePassword.js"],"sourcesContent":["import { Button, TextField } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { showErrorToast, showSuccessToast } from \"../../components/common\";\nimport { CommonController } from \"../../_redux/controller/common.controller\";\n\nconst ChangePassword = () => {\n  const [formData, setFormData] = useState({\n    oldpass: \"\",\n    newpass: \"\",\n    confpass: \"\",\n    user_id: localStorage.getItem(\"userId\"),\n    errors: {},\n  });\n\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (event) => {\n    setFormData({ ...formData, [event.target.name]: event.target.value });\n  };\n\n  const validateForm = () => {\n    let errors = { ...formData.errors };\n    if (formData.oldpass == \"\") {\n      errors.oldpass = \"Please enter old password\";\n    } else {\n      delete errors.oldpass;\n    }\n    if (formData.newpass == \"\") {\n      errors.newpass = \"Please enter new password\";\n    } else {\n      delete errors.newpass;\n    }\n    if (formData.confpass == \"\") {\n      errors.confpass = \"Please enter confirm password\";\n    } else {\n      delete errors.confpass;\n    }\n    console.log(errors);\n    setFormData({ ...formData, errors: errors });\n    return Object.keys(errors).length !== 0;\n  };\n\n  const onSubmit = async () => {\n    try {\n      setLoading(true);\n      if (!validateForm()) {\n        await CommonController.commonApiCallFilter(\n          \"Profile/UpdateEmployeePassword\",\n          formData,\n          \"post\"\n        ).then((data) => {\n          if (data.valid) {\n            showSuccessToast(\"Password changed successfully \");\n          } else {\n            showErrorToast(data.msg);\n          }\n        });\n      }\n      setLoading(false);\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  return (\n    <div className=\"card shadow\">\n      <div className=\"card-body\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              value={formData.oldpass}\n              name=\"oldpass\"\n              type=\"password\"\n              label=\"Old Password\"\n              onChange={handleChange}\n            />\n            {formData.errors && (\n              <p className=\"mb-0 text-danger\">{formData.errors.oldpass}</p>\n            )}\n          </div>\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              name=\"newpass\"\n              type=\"password\"\n              value={formData.newpass}\n              label=\"New Password\"\n              onChange={handleChange}\n            />\n            {formData.errors && (\n              <p className=\"mb-0 text-danger\">{formData.errors.newpass}</p>\n            )}\n          </div>\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              name=\"confpass\"\n              value={formData.confpass}\n              label=\"Conf. Password\"\n              onChange={handleChange}\n            />\n            {formData.errors && (\n              <p className=\"mb-0 text-danger\">{formData.errors.confpass}</p>\n            )}\n          </div>\n          <div className=\"col-md-12 mt-5\">\n            <Button\n              disable={loading}\n              variant=\"contained\"\n              onClick={onSubmit}\n              disableElevation\n              color=\"primary\"\n            >\n              {loading ? \"Processing...\" : \"Update Password\"}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangePassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}