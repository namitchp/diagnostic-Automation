{"ast":null,"code":"var _jsxFileName = \"F:\\\\React code\\\\diagnostic\\\\src\\\\pages\\\\index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport MainLayout from '../layouts/layout';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { checkAuthOTP, getDecryptUserId } from '../_redux/actions/auth.action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SwitchApp = props => {\n  _s();\n  const isAuthorisedByUrl = new URLSearchParams(props.location.search).get(\"token\");\n  const dispatch = useDispatch();\n  const getDecryptUserDetailsResponse = useSelector(state => state.auth.decryptUserDetails);\n  const checkAuthOtpResponse = useSelector(state => state.auth.getOtpResponse);\n  useEffect(() => {\n    if (isAuthorisedByUrl) {\n      const param = {\n        encrypt_user_id: isAuthorisedByUrl\n      };\n      dispatch(getDecryptUserId(param));\n    } else {\n      window.location = \"/\";\n    }\n  }, [isAuthorisedByUrl]);\n  useEffect(() => {\n    if (getDecryptUserDetailsResponse) {\n      console.log(getDecryptUserDetailsResponse);\n      var login = `grant_type=password&username=${getDecryptUserDetailsResponse.user_name}&password=${getDecryptUserDetailsResponse.password}`;\n      dispatch(checkAuthOTP(login));\n    }\n  }, [getDecryptUserDetailsResponse]);\n  useEffect(() => {\n    if (!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)) {\n      if (checkAuthOtpResponse.valid) {\n        localStorage.setItem(\"token\", checkAuthOtpResponse.access_token);\n        localStorage.setItem(\"login\", checkAuthOtpResponse.valid);\n        localStorage.setItem(\"userName\", checkAuthOtpResponse.userName);\n        localStorage.setItem(\"userId\", checkAuthOtpResponse.userId);\n        localStorage.setItem(\"code\", checkAuthOtpResponse.code);\n        localStorage.setItem(\"encrypt_userId\", checkAuthOtpResponse.encrypt_userId);\n        window.location = \"/\";\n      }\n    }\n  }, [checkAuthOtpResponse]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"switch_loader\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Please wait....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 13\n  }, this);\n};\n_s(SwitchApp, \"5RN+OYYz28h1G+NI1M9QqQcgi2o=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = SwitchApp;\nexport default SwitchApp;\nvar _c;\n$RefreshReg$(_c, \"SwitchApp\");","map":{"version":3,"names":["React","useEffect","MainLayout","CircularProgress","useDispatch","useSelector","checkAuthOTP","getDecryptUserId","SwitchApp","props","isAuthorisedByUrl","URLSearchParams","location","search","get","dispatch","getDecryptUserDetailsResponse","state","auth","decryptUserDetails","checkAuthOtpResponse","getOtpResponse","param","encrypt_user_id","window","console","log","login","user_name","password","Object","keys","length","constructor","valid","localStorage","setItem","access_token","userName","userId","code","encrypt_userId"],"sources":["F:/React code/diagnostic/src/pages/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport MainLayout from '../layouts/layout';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { checkAuthOTP, getDecryptUserId } from '../_redux/actions/auth.action';\r\n\r\n\r\n\r\n\r\nconst SwitchApp = (props) => {\r\nconst isAuthorisedByUrl = new URLSearchParams(props.location.search).get(\"token\");\r\nconst dispatch = useDispatch();\r\nconst getDecryptUserDetailsResponse = useSelector((state) => state.auth.decryptUserDetails);\r\nconst checkAuthOtpResponse = useSelector((state) => state.auth.getOtpResponse);\r\n\r\nuseEffect(() => {\r\n    if(isAuthorisedByUrl){\r\n        const param = {\r\n            encrypt_user_id:isAuthorisedByUrl\r\n        }\r\n        dispatch(getDecryptUserId(param));\r\n    }\r\n    else{\r\n        window.location = \"/\";\r\n    }\r\n},[isAuthorisedByUrl]);\r\n\r\n\r\nuseEffect(() => {\r\n    if(getDecryptUserDetailsResponse){\r\n        console.log(getDecryptUserDetailsResponse);\r\n        var login = `grant_type=password&username=${getDecryptUserDetailsResponse.user_name}&password=${getDecryptUserDetailsResponse.password}`;\r\n        dispatch(checkAuthOTP(login));\r\n    }\r\n},[getDecryptUserDetailsResponse]);\r\n\r\nuseEffect(() => {\r\n    if(!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)){\r\n        if(checkAuthOtpResponse.valid){\r\n            localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);\r\n            localStorage.setItem(\"login\",checkAuthOtpResponse.valid);\r\n            localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);\r\n            localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);\r\n            localStorage.setItem(\"code\",checkAuthOtpResponse.code);\r\n            localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);\r\n            window.location = \"/\";\r\n        }\r\n    }\r\n},[checkAuthOtpResponse])\r\n\r\n\r\n    return  <div className=\"switch_loader\">\r\n            <div>\r\n                <CircularProgress />\r\n                <h4>Please wait....</h4>\r\n            </div>\r\n    </div>\r\n\r\n}\r\n\r\nexport default SwitchApp;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,UAAU,MAAM,mBAAmB;AAC1C,OAAOC,gBAAgB,MAAM,oCAAoC;AACjE,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,YAAY,EAAEC,gBAAgB,QAAQ,+BAA+B;AAAC;AAK/E,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAAA;EAC7B,MAAMC,iBAAiB,GAAG,IAAIC,eAAe,CAACF,KAAK,CAACG,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,OAAO,CAAC;EACjF,MAAMC,QAAQ,GAAGX,WAAW,EAAE;EAC9B,MAAMY,6BAA6B,GAAGX,WAAW,CAAEY,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACC,kBAAkB,CAAC;EAC3F,MAAMC,oBAAoB,GAAGf,WAAW,CAAEY,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACG,cAAc,CAAC;EAE9EpB,SAAS,CAAC,MAAM;IACZ,IAAGS,iBAAiB,EAAC;MACjB,MAAMY,KAAK,GAAG;QACVC,eAAe,EAACb;MACpB,CAAC;MACDK,QAAQ,CAACR,gBAAgB,CAACe,KAAK,CAAC,CAAC;IACrC,CAAC,MACG;MACAE,MAAM,CAACZ,QAAQ,GAAG,GAAG;IACzB;EACJ,CAAC,EAAC,CAACF,iBAAiB,CAAC,CAAC;EAGtBT,SAAS,CAAC,MAAM;IACZ,IAAGe,6BAA6B,EAAC;MAC7BS,OAAO,CAACC,GAAG,CAACV,6BAA6B,CAAC;MAC1C,IAAIW,KAAK,GAAI,gCAA+BX,6BAA6B,CAACY,SAAU,aAAYZ,6BAA6B,CAACa,QAAS,EAAC;MACxId,QAAQ,CAACT,YAAY,CAACqB,KAAK,CAAC,CAAC;IACjC;EACJ,CAAC,EAAC,CAACX,6BAA6B,CAAC,CAAC;EAElCf,SAAS,CAAC,MAAM;IACZ,IAAG,EAAE6B,MAAM,CAACC,IAAI,CAACX,oBAAoB,CAAC,CAACY,MAAM,KAAK,CAAC,IAAIZ,oBAAoB,CAACa,WAAW,KAAKH,MAAM,CAAC,EAAC;MAChG,IAAGV,oBAAoB,CAACc,KAAK,EAAC;QAC1BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAChB,oBAAoB,CAACiB,YAAY,CAAC;QAC/DF,YAAY,CAACC,OAAO,CAAC,OAAO,EAAChB,oBAAoB,CAACc,KAAK,CAAC;QACxDC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAChB,oBAAoB,CAACkB,QAAQ,CAAC;QAC9DH,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAChB,oBAAoB,CAACmB,MAAM,CAAC;QAC1DJ,YAAY,CAACC,OAAO,CAAC,MAAM,EAAChB,oBAAoB,CAACoB,IAAI,CAAC;QACtDL,YAAY,CAACC,OAAO,CAAC,gBAAgB,EAAChB,oBAAoB,CAACqB,cAAc,CAAC;QAC1EjB,MAAM,CAACZ,QAAQ,GAAG,GAAG;MACzB;IACJ;EACJ,CAAC,EAAC,CAACQ,oBAAoB,CAAC,CAAC;EAGrB,oBAAQ;IAAK,SAAS,EAAC,eAAe;IAAA,uBAC9B;MAAA,wBACI,QAAC,gBAAgB;QAAA;QAAA;QAAA;MAAA,QAAG,eACpB;QAAA,UAAI;MAAe;QAAA;QAAA;QAAA;MAAA,QAAK;IAAA;MAAA;MAAA;MAAA;IAAA;EACtB;IAAA;IAAA;IAAA;EAAA,QACR;AAEV,CAAC;AAAA,GAjDKZ,SAAS;EAAA,QAEEJ,WAAW,EACUC,WAAW,EACpBA,WAAW;AAAA;AAAA,KAJlCG,SAAS;AAmDf,eAAeA,SAAS;AAAC;AAAA"},"metadata":{},"sourceType":"module"}