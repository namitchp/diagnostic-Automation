{"ast":null,"code":"import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{DatePicker}from\"@material-ui/pickers\";import moment from\"moment\";import React,{useEffect,useState}from\"react\";import{CommonController}from\"../_redux/controller/common.controller\";import{showErrorToast}from\"./common\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DateFilter=function DateFilter(_ref){var onDateUpdate=_ref.onDateUpdate;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),dateUpdate=_useState2[0],setDateUpdate=_useState2[1];var _useState3=useState({user_id:localStorage.getItem(\"userId\"),from_date:null,to_date:null}),_useState4=_slicedToArray(_useState3,2),dateParams=_useState4[0],setDateParams=_useState4[1];var from_date=dateParams.from_date,to_date=dateParams.to_date;var getDateFilter=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;user_id=localStorage.getItem(\"userId\");_context.next=4;return CommonController.commonApiCallFilter(\"user/date_filter\",{user_id:user_id},\"get\",\"node\").then(function(data){if(data.status===200){var _data$data=_slicedToArray(data.data,1),getDate=_data$data[0];setDateParams(_objectSpread(_objectSpread({},dateParams),{},{from_date:getDate.start_date,to_date:getDate.end_date}));onDateUpdate();}else{showErrorToast(data.msg);}});case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);showErrorToast(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function getDateFilter(){return _ref2.apply(this,arguments);};}();var updateDateFilter=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var date;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;date=_objectSpread({},dateParams);date.from_date=moment(date.from_date).format(\"MM/DD/yyyy\");date.to_date=moment(date.to_date).format(\"MM/DD/yyyy\");_context2.next=6;return CommonController.commonApiCallFilter(\"user/insert_date_filter\",date,\"post\",\"node\").then(function(data){if(data.status===200){getDateFilter();}else{showErrorToast(data.msg);}});case 6:_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);showErrorToast(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function updateDateFilter(){return _ref3.apply(this,arguments);};}();var handleDateChange=function handleDateChange(name,date){setDateParams(_objectSpread(_objectSpread({},dateParams),{},_defineProperty({},name,date)));setDateUpdate(dateUpdate+1);};useEffect(function(){getDateFilter();},[]);useEffect(function(){if(from_date&&to_date){updateDateFilter();}},[dateUpdate]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(DatePicker,{label:\"From Date\",value:from_date,format:\"dd/MM/yyyy\",onChange:function onChange(date){return handleDateChange(\"from_date\",date);},animateYearScrolling:true,inputVariant:\"outlined\",size:\"small\",fullWidth:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(DatePicker,{label:\"To Date\",value:to_date,onChange:function onChange(date){return handleDateChange(\"to_date\",date);},animateYearScrolling:true,format:\"dd/MM/yyyy\",minDate:from_date,inputVariant:\"outlined\",size:\"small\",fullWidth:true})})]});};export default DateFilter;","map":{"version":3,"sources":["F:/React code/diagnostic/src/components/dateFilter.js"],"names":["DatePicker","moment","React","useEffect","useState","CommonController","showErrorToast","DateFilter","onDateUpdate","dateUpdate","setDateUpdate","user_id","localStorage","getItem","from_date","to_date","dateParams","setDateParams","getDateFilter","commonApiCallFilter","then","data","status","getDate","start_date","end_date","msg","updateDateFilter","date","format","handleDateChange","name"],"mappings":"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","sourcesContent":["import { DatePicker } from \"@material-ui/pickers\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { CommonController } from \"../_redux/controller/common.controller\";\r\nimport { showErrorToast } from \"./common\";\r\n\r\nconst DateFilter = ({ onDateUpdate }) => {\r\n  const [dateUpdate, setDateUpdate] = useState(0)\r\n  const [dateParams, setDateParams] = useState({\r\n    user_id: localStorage.getItem(\"userId\"),\r\n    from_date: null,\r\n    to_date: null,\r\n  });\r\n\r\n  const { from_date, to_date } = dateParams;\r\n  const getDateFilter = async () => {\r\n    try {\r\n      let user_id=localStorage.getItem(\"userId\")\r\n      await CommonController.commonApiCallFilter(\r\n        \"user/date_filter\",\r\n        {user_id:user_id},\r\n        \"get\",\r\n        \"node\"\r\n      ).then((data) => {\r\n        if (data.status===200) {\r\n         const [getDate]=data.data;\r\n         setDateParams({...dateParams,from_date:getDate.start_date,to_date:getDate.end_date\r\n         })\r\n          onDateUpdate();\r\n        } else {\r\n          showErrorToast(data.msg);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      showErrorToast(err);\r\n    }\r\n  };\r\n\r\n  const updateDateFilter = async () => {\r\n    try {\r\n      let date = { ...dateParams };\r\n      date.from_date = moment(date.from_date).format(\"MM/DD/yyyy\");\r\n      date.to_date = moment(date.to_date).format(\"MM/DD/yyyy\");\r\n      await CommonController.commonApiCallFilter(\r\n        \"user/insert_date_filter\",\r\n        date,\r\n        \"post\",\r\n        \"node\"\r\n      ).then((data) => {\r\n        if (data.status===200) {\r\n\r\n          getDateFilter()\r\n        } else {\r\n          showErrorToast(data.msg);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      showErrorToast(err);\r\n    }\r\n  };\r\n \r\n\r\n  const handleDateChange = (name, date) => {\r\n    setDateParams({ ...dateParams, [name]: date });\r\n    setDateUpdate(dateUpdate+1);\r\n  };\r\n  useEffect(() => {\r\ngetDateFilter()\r\n  },[])\r\n  \r\n  useEffect(() => {\r\n    if (from_date && to_date) {\r\n      updateDateFilter();\r\n    }\r\n  }, [dateUpdate]);\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"col-md-2\">\r\n        <DatePicker\r\n          label=\"From Date\"\r\n          value={from_date}\r\n          format=\"dd/MM/yyyy\"\r\n          onChange={(date) => handleDateChange(\"from_date\", date)}\r\n          animateYearScrolling\r\n          inputVariant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n        />\r\n      </div>\r\n      <div className=\"col-md-2\">\r\n        <DatePicker\r\n          label=\"To Date\"\r\n          value={to_date}\r\n          onChange={(date) => handleDateChange(\"to_date\", date)}\r\n          animateYearScrolling\r\n          format=\"dd/MM/yyyy\"\r\n          minDate={from_date}\r\n          inputVariant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n        />\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default DateFilter;\r\n"]},"metadata":{},"sourceType":"module"}