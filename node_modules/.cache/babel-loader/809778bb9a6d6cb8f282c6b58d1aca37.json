{"ast":null,"code":"import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{TextField,Button,MenuItem,List,Avatar,ListItemAvatar,ListItem,ListItemText}from\"@material-ui/core\";import{DataGrid}from\"@mui/x-data-grid\";import React,{useEffect,useState}from\"react\";import{getBrowseUserRight,showErrorToast,showSuccessToast}from\"../../../components/common\";import{Loader}from\"../../../components/loader\";import{CommonController}from\"../../../_redux/controller/common.controller\";import ActionButtons from\"../../../components/action-buttons\";import{useDispatch,useSelector}from\"react-redux\";import{selectedEmployeeId}from\"../../../_redux/actions/masters/all.action\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import moment from\"moment\";import ImageIcon from\"@material-ui/icons/Image\";import{DatePicker}from\"@material-ui/pickers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SalesIssueBrowse=function SalesIssueBrowse(_ref){var onEdit=_ref.onEdit;var dispatch=useDispatch();var getuserRightListResponse=useSelector(function(state){return state.common.userRightList;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),browseListData=_useState2[0],setBrowseListData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalRecord=_useState4[0],setTotalRecords=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),remarksModal=_useState8[0],setRemarksModal=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),remarksList=_useState10[0],setRemarksList=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),remarkLoading=_useState12[0],setRemarkLoading=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),markEng=_useState14[0],setMarkEng=_useState14[1];var _useState15=useState({status_id:\"\",remarks:\"\",user_id:localStorage.getItem(\"userId\")}),_useState16=_slicedToArray(_useState15,2),remarks=_useState16[0],setRemarks=_useState16[1];var _useState17=useState({pageNo:1,pageSize:15,filter_value:\"\",sort_column:\"\",sort_order:\"desc\"}),_useState18=_slicedToArray(_useState17,2),params=_useState18[0],setParams=_useState18[1];var _useState19=useState({user_id:localStorage.getItem(\"userId\"),chk_All:\"1\",company_name:\"\",type:\"all\",status:\"all\",mark_engg:\"\",fromDate:null,toDate:null}),_useState20=_slicedToArray(_useState19,2),bodyParam=_useState20[0],setBodyParam=_useState20[1];var toggleRemarks=function toggleRemarks(){setRemarksModal(!remarksModal);};var handleParams=function handleParams(event){setTimeout(function(){setParams(_objectSpread(_objectSpread({},params),{},_defineProperty({},event.target.name,event.target.value)));},800);};var handleBodyParam=function handleBodyParam(event){setTimeout(function(){setBodyParam(_objectSpread(_objectSpread({},bodyParam),{},_defineProperty({},event.target.name,event.target.value)));},800);};var getBrowseListData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return CommonController.commonApiCall(\"Sales/SalesEnquiryBrowse\",params,bodyParam).then(function(data){setBrowseListData(data.data);setTotalRecords(data.recordsFiltered);}).catch(function(err){showErrorToast(err);});case 3:setLoading(false);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getBrowseListData(){return _ref2.apply(this,arguments);};}();var getRemarkList=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setRemarks(_objectSpread(_objectSpread({},remarks),{},{tran_id:id}));setRemarkLoading(true);_context2.next=4;return CommonController.commonApiCallFilter(\"Sales/CloseSalesEnquiry\",{enquiry_id:id},\"get\").then(function(data){setRemarksList(data);setRemarksModal(true);}).catch(function(err){showErrorToast(err);});case 4:setRemarkLoading(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getRemarkList(_x){return _ref3.apply(this,arguments);};}();var getMarkEngList=function getMarkEngList(){CommonController.commonApiCallFilter(\"Dropdown/SalesEnquiryDropdown\").then(function(data){return setMarkEng(data.employeeList);});};var onRemarkChange=function onRemarkChange(event){setRemarks(_objectSpread(_objectSpread({},remarks),{},_defineProperty({},event.target.name,event.target.value)));};var handlePageSizeChange=function handlePageSizeChange(param){setParams(_objectSpread(_objectSpread({},params),{},{pageSize:param.pageSize}));};var handlePageChange=function handlePageChange(param){setParams(_objectSpread(_objectSpread({},params),{},{pageNo:param.page}));};var handleDateChange=function handleDateChange(type,date){setBodyParam(_objectSpread(_objectSpread({},bodyParam),{},_defineProperty({},type,date)));};useEffect(function(){getBrowseListData();getMarkEngList();},[]);useEffect(function(){getBrowseListData();},[params,getuserRightListResponse,bodyParam]);var handleEdit=function handleEdit(id){dispatch(selectedEmployeeId(id));onEdit();};var handleDeleteRow=function handleDeleteRow(id){CommonController.commonApiCallFilter(\"Employee/EmployeeMasterDelete\",{employee_id:id}).then(function(data){if(data.valid){showSuccessToast(\"Record Deleted Successfully\");getBrowseListData();}else{showErrorToast(\"Something went wrong\");}});};var saveRemarks=function saveRemarks(){setLoading(true);try{CommonController.commonApiCallFilter(\"Sales/UpdateSalesEnquiryRemarks\",remarks).then(function(data){if(data.valid){getBrowseListData();showSuccessToast(\"Remarks Updated Successfully\");setRemarksModal(false);}else{showErrorToast(data.msg);}});}catch(err){showErrorToast(\"Something went wrong\");}setLoading(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(\"div\",{className:\"filter_box mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0\",children:\"Filters\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onKeyDown:function onKeyDown(e){if(e.keyCode===13){handleParams(e);}},name:\"filter_value\",label:\"Search\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(DatePicker,{label:\"From Date\",value:bodyParam.fromDate,format:\"dd/MM/yyyy\",onChange:function onChange(date){return handleDateChange(\"fromDate\",date);},animateYearScrolling:true,inputVariant:\"outlined\",size:\"small\",fullWidth:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(DatePicker,{label:\"To Date\",value:bodyParam.toDate,onChange:function onChange(date){return handleDateChange(\"toDate\",date);},animateYearScrolling:true,inputVariant:\"outlined\",size:\"small\",fullWidth:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onKeyDown:function onKeyDown(e){if(e.keyCode===13){handleBodyParam(e);}},name:\"party_name\",label:\"Company Name\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\",children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onChange:function onChange(e){handleBodyParam(e);},name:\"type\",select:true,label:\"Type\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"spares\",children:\"Spares\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"projects\",children:\"Projects\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"service\",children:\"Service\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\",children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onChange:function onChange(e){handleBodyParam(e);},select:true,name:\"status\",label:\"Status\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"spares\",children:\"Close\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"spares\",children:\"Open\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 mt-3\",children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onChange:function onChange(e){handleBodyParam(e);},select:true,name:\"mark_engg\",label:\"Marketing Eng.\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"None\"}),markEng&&markEng.map(function(eng,indx){return/*#__PURE__*/_jsx(MenuItem,{value:eng.value,children:eng.value},indx);})]})})]})}),/*#__PURE__*/_jsxs(Dialog,{open:remarksModal,fullWidth:true,onClose:toggleRemarks,\"aria-labelledby\":\"responsive-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"responsive-dialog-title\",children:\"Add Comment\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(TextField,{variant:\"outlined\",className:\"mb-4\",size:\"small\",fullWidth:true,id:\"select-1\",select:true,name:\"status_id\",onChange:onRemarkChange,label:\"Enquiry Status*\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"0\",children:\"Close\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"1\",children:\"Open\"})]}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",multiline:true,size:\"small\",name:\"remarks\",onChange:onRemarkChange,label:\"Remarks*\",fullWidth:true}),/*#__PURE__*/_jsx(List,{children:remarksList&&remarksList.length>0&&remarksList.map(function(remark,index){return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(ImageIcon,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:remark.user_name,secondary:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[remark.remarks,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"float-right\",children:remark.datetime})]})})]},index);})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:toggleRemarks,color:\"primary\",children:\"Close\"}),/*#__PURE__*/_jsx(Button,{onClick:saveRemarks,disabled:remarks.remarks==\"\"||remarks.status_id==\"\"||loading,color:\"primary\",children:\"Save\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:400,width:\"100%\"},children:/*#__PURE__*/_jsx(DataGrid,{columns:[{field:\"id\",headerName:\"Sr. no\",width:80},{field:\"date\",headerName:\"Date\",width:100,renderCell:function renderCell(params){return moment(params.row.date).format(\"DD/MM/yyyy\");}},{field:\"enquiry_no\",headerName:\"Enquiry No\",width:120},{field:\"company_id\",headerName:\"Comp Id\",width:100},{field:\"company_name\",headerName:\"Company Name\",width:200},{field:\"description\",headerName:\"Description\",width:200},{field:\"type\",headerName:\"Type\",width:100},{field:\"priority_name\",headerName:\"Priority Name\",width:100},{field:\"reference_name\",headerName:\"Reference\",width:120},{field:\"status\",headerName:\"Status\",width:100},{field:\"employee_name\",headerName:\"Employee Name\",width:150},{field:\"mark_engg\",headerName:\"Marketing Eng.\",width:150},{field:\"remarks\",headerName:\"Remarks\",width:150,renderCell:function renderCell(param){return/*#__PURE__*/_jsx(_Fragment,{children:remarkLoading?/*#__PURE__*/_jsx(\"img\",{src:\"/asset/images/circle.gif\",width:20}):/*#__PURE__*/_jsx(Button,{className:\"text-lowercase\",color:\"primary\",onClick:function onClick(){getRemarkList(param.row.tran_id);},children:param.row.remarks})});}},{field:\"\",headerName:\"Actions\",renderCell:function renderCell(params){var _getBrowseUserRight,_getBrowseUserRight2,_getBrowseUserRight3;return/*#__PURE__*/_jsx(ActionButtons,{onPreview:((_getBrowseUserRight=getBrowseUserRight(getuserRightListResponse))===null||_getBrowseUserRight===void 0?void 0:_getBrowseUserRight.view_right)==\"True\"?function(){return handleEdit(params.row.id);}:null,onEdit:((_getBrowseUserRight2=getBrowseUserRight(getuserRightListResponse))===null||_getBrowseUserRight2===void 0?void 0:_getBrowseUserRight2.edit_button)==\"True\"?function(){return handleEdit(params.row.id);}:null,onDelete:((_getBrowseUserRight3=getBrowseUserRight(getuserRightListResponse))===null||_getBrowseUserRight3===void 0?void 0:_getBrowseUserRight3.delete_right)==\"True\"?function(){return handleDeleteRow(params.row.id);}:null});},width:100}],pagination:true,disableColumnFilter:true,pageSize:params.pageSize,page:params.pageNo,rowsPerPageOptions:[10,15,25,100],rowCount:totalRecord,paginationMode:\"server\",onPageSizeChange:handlePageSizeChange,onPageChange:handlePageChange,loading:loading,rowHeight:30//components={{\n//Pagination: CustomPagination,\n//NoRowsOverlay: CustomNoRowsOverlay,\n//       }}\n,onSortModelChange:function onSortModelChange(sort){if(sort.length>0){setParams(_objectSpread(_objectSpread({},params),{},{sort_column:sort[0].field,sort_order:sort[0].sort}));}},rows:browseListData})})]});};export default SalesIssueBrowse;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Sales/issues/browse.js"],"names":["TextField","Button","MenuItem","List","Avatar","ListItemAvatar","ListItem","ListItemText","DataGrid","React","useEffect","useState","getBrowseUserRight","showErrorToast","showSuccessToast","Loader","CommonController","ActionButtons","useDispatch","useSelector","selectedEmployeeId","Dialog","DialogActions","DialogContent","DialogTitle","moment","ImageIcon","DatePicker","SalesIssueBrowse","onEdit","dispatch","getuserRightListResponse","state","common","userRightList","browseListData","setBrowseListData","totalRecord","setTotalRecords","loading","setLoading","remarksModal","setRemarksModal","remarksList","setRemarksList","remarkLoading","setRemarkLoading","markEng","setMarkEng","status_id","remarks","user_id","localStorage","getItem","setRemarks","pageNo","pageSize","filter_value","sort_column","sort_order","params","setParams","chk_All","company_name","type","status","mark_engg","fromDate","toDate","bodyParam","setBodyParam","toggleRemarks","handleParams","event","setTimeout","target","name","value","handleBodyParam","getBrowseListData","commonApiCall","then","data","recordsFiltered","catch","err","getRemarkList","id","tran_id","commonApiCallFilter","enquiry_id","getMarkEngList","employeeList","onRemarkChange","handlePageSizeChange","param","handlePageChange","page","handleDateChange","date","handleEdit","handleDeleteRow","employee_id","valid","saveRemarks","msg","e","keyCode","map","eng","indx","length","remark","index","user_name","datetime","height","width","field","headerName","renderCell","row","format","view_right","edit_button","delete_right","sort"],"mappings":"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","sourcesContent":["import {\n  TextField,\n  Button,\n  MenuItem,\n  List,\n  Avatar,\n  ListItemAvatar,\n  ListItem,\n  ListItemText,\n} from \"@material-ui/core\";\nimport { DataGrid } from \"@mui/x-data-grid\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  getBrowseUserRight,\n  showErrorToast,\n  showSuccessToast,\n} from \"../../../components/common\";\nimport { Loader } from \"../../../components/loader\";\nimport { CommonController } from \"../../../_redux/controller/common.controller\";\nimport ActionButtons from \"../../../components/action-buttons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectedEmployeeId } from \"../../../_redux/actions/masters/all.action\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport moment from \"moment\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport { DatePicker } from \"@material-ui/pickers\";\nconst SalesIssueBrowse = ({ onEdit }) => {\n  const dispatch = useDispatch();\n  const getuserRightListResponse = useSelector(\n    (state) => state.common.userRightList\n  );\n  const [browseListData, setBrowseListData] = useState([]);\n  const [totalRecord, setTotalRecords] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [remarksModal, setRemarksModal] = useState(false);\n  const [remarksList, setRemarksList] = useState(null);\n  const [remarkLoading, setRemarkLoading] = useState(false);\n  const [markEng, setMarkEng] = useState(null);\n  const [remarks, setRemarks] = useState({\n    status_id: \"\",\n    remarks: \"\",\n    user_id: localStorage.getItem(\"userId\"),\n  });\n  const [params, setParams] = useState({\n    pageNo: 1,\n    pageSize: 15,\n    filter_value: \"\",\n    sort_column: \"\",\n    sort_order: \"desc\",\n  });\n  const [bodyParam, setBodyParam] = useState({\n    user_id: localStorage.getItem(\"userId\"),\n    chk_All: \"1\",\n    company_name: \"\",\n    type: \"all\",\n    status: \"all\",\n    mark_engg: \"\",\n    fromDate: null,\n    toDate: null,\n  });\n\n  const toggleRemarks = () => {\n    setRemarksModal(!remarksModal);\n  };\n\n  const handleParams = (event) => {\n    setTimeout(() => {\n      setParams({ ...params, [event.target.name]: event.target.value });\n    }, 800);\n  };\n\n  const handleBodyParam = (event) => {\n    setTimeout(() => {\n      setBodyParam({ ...bodyParam, [event.target.name]: event.target.value });\n    }, 800);\n  };\n\n  const getBrowseListData = async () => {\n    setLoading(true);\n    await CommonController.commonApiCall(\n      \"Sales/SalesEnquiryBrowse\",\n      params,\n      bodyParam\n    )\n      .then((data) => {\n        setBrowseListData(data.data);\n        setTotalRecords(data.recordsFiltered);\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n    setLoading(false);\n  };\n\n  const getRemarkList = async (id) => {\n    setRemarks({ ...remarks, tran_id: id });\n    setRemarkLoading(true);\n    await CommonController.commonApiCallFilter(\n      \"Sales/CloseSalesEnquiry\",\n      {\n        enquiry_id: id,\n      },\n      \"get\"\n    )\n      .then((data) => {\n        setRemarksList(data);\n        setRemarksModal(true);\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n    setRemarkLoading(false);\n  };\n\n  const getMarkEngList = () => {\n    CommonController.commonApiCallFilter(\"Dropdown/SalesEnquiryDropdown\").then(\n      (data) => setMarkEng(data.employeeList)\n    );\n  };\n\n  const onRemarkChange = (event) => {\n    setRemarks({ ...remarks, [event.target.name]: event.target.value });\n  };\n\n  const handlePageSizeChange = (param) => {\n    setParams({ ...params, pageSize: param.pageSize });\n  };\n  const handlePageChange = (param) => {\n    setParams({ ...params, pageNo: param.page });\n  };\n\n  const handleDateChange = (type, date) => {\n    setBodyParam({ ...bodyParam, [type]: date });\n  };\n\n  useEffect(() => {\n    getBrowseListData();\n    getMarkEngList();\n  }, []);\n\n  useEffect(() => {\n    getBrowseListData();\n  }, [params, getuserRightListResponse, bodyParam]);\n\n  const handleEdit = (id) => {\n    dispatch(selectedEmployeeId(id));\n    onEdit();\n  };\n\n  const handleDeleteRow = (id) => {\n    CommonController.commonApiCallFilter(\"Employee/EmployeeMasterDelete\", {\n      employee_id: id,\n    }).then((data) => {\n      if (data.valid) {\n        showSuccessToast(\"Record Deleted Successfully\");\n        getBrowseListData();\n      } else {\n        showErrorToast(\"Something went wrong\");\n      }\n    });\n  };\n\n  const saveRemarks = () => {\n    setLoading(true);\n    try {\n      CommonController.commonApiCallFilter(\n        \"Sales/UpdateSalesEnquiryRemarks\",\n        remarks\n      ).then((data) => {\n        if (data.valid) {\n          getBrowseListData();\n          showSuccessToast(\"Remarks Updated Successfully\");\n          setRemarksModal(false);\n        } else {\n          showErrorToast(data.msg);\n        }\n      });\n    } catch (err) {\n      showErrorToast(\"Something went wrong\");\n    }\n    setLoading(false);\n  };\n\n  return (\n    <>\n      {loading && <Loader />}\n\n      <div className=\"filter_box mb-5\">\n        <div className=\"row\">\n          <div className=\"col-md-1 d-flex align-items-center\">\n            <h4 className=\"mb-0\">Filters</h4>\n          </div>\n\n          <div className=\"col-md-2\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onKeyDown={(e) => {\n                if (e.keyCode === 13) {\n                  handleParams(e);\n                }\n              }}\n              name=\"filter_value\"\n              label=\"Search\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <DatePicker\n              label=\"From Date\"\n              value={bodyParam.fromDate}\n              format=\"dd/MM/yyyy\"\n              onChange={(date) => handleDateChange(\"fromDate\", date)}\n              animateYearScrolling\n              inputVariant=\"outlined\"\n              size=\"small\"\n              fullWidth\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <DatePicker\n              label=\"To Date\"\n              value={bodyParam.toDate}\n              onChange={(date) => handleDateChange(\"toDate\", date)}\n              animateYearScrolling\n              inputVariant=\"outlined\"\n              size=\"small\"\n              fullWidth\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onKeyDown={(e) => {\n                if (e.keyCode === 13) {\n                  handleBodyParam(e);\n                }\n              }}\n              name=\"party_name\"\n              label=\"Company Name\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div className=\"col-md-1\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onChange={(e) => {\n                handleBodyParam(e);\n              }}\n              name=\"type\"\n              select\n              label=\"Type\"\n              variant=\"outlined\"\n            >\n              <MenuItem value={\"all\"}>All</MenuItem>\n              <MenuItem value={\"spares\"}>Spares</MenuItem>\n              <MenuItem value={\"projects\"}>Projects</MenuItem>\n              <MenuItem value={\"service\"}>Service</MenuItem>\n            </TextField>\n          </div>\n          <div className=\"col-md-1\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onChange={(e) => {\n                handleBodyParam(e);\n              }}\n              select\n              name=\"status\"\n              label=\"Status\"\n              variant=\"outlined\"\n            >\n              <MenuItem value={\"all\"}>All</MenuItem>\n              <MenuItem value={\"spares\"}>Close</MenuItem>\n              <MenuItem value={\"spares\"}>Open</MenuItem>\n            </TextField>\n          </div>\n          <div className=\"col-md-2 mt-3\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onChange={(e) => {\n                handleBodyParam(e);\n              }}\n              select\n              name=\"mark_engg\"\n              label=\"Marketing Eng.\"\n              variant=\"outlined\"\n            >\n              <MenuItem value={\"\"}>None</MenuItem>\n              {markEng &&\n                markEng.map((eng, indx) => {\n                  return (\n                    <MenuItem value={eng.value} key={indx}>\n                      {eng.value}\n                    </MenuItem>\n                  );\n                })}\n            </TextField>\n          </div>\n        </div>\n      </div>\n      {/* Update remarks modal */}\n\n      <Dialog\n        open={remarksModal}\n        fullWidth\n        onClose={toggleRemarks}\n        aria-labelledby=\"responsive-dialog-title\"\n      >\n        <DialogTitle id=\"responsive-dialog-title\">Add Comment</DialogTitle>\n        <DialogContent>\n          <TextField\n            variant=\"outlined\"\n            className=\"mb-4\"\n            size=\"small\"\n            fullWidth\n            id=\"select-1\"\n            select\n            name=\"status_id\"\n            onChange={onRemarkChange}\n            label=\"Enquiry Status*\"\n          >\n            <MenuItem value={\"0\"}>Close</MenuItem>\n            <MenuItem value={\"1\"}>Open</MenuItem>\n          </TextField>\n          <TextField\n            variant=\"outlined\"\n            multiline\n            size=\"small\"\n            name=\"remarks\"\n            onChange={onRemarkChange}\n            label=\"Remarks*\"\n            fullWidth\n          />\n          <List>\n            {remarksList &&\n              remarksList.length > 0 &&\n              remarksList.map((remark, index) => {\n                return (\n                  <ListItem key={index}>\n                    <ListItemAvatar>\n                      <Avatar>\n                        <ImageIcon />\n                      </Avatar>\n                    </ListItemAvatar>\n                    <ListItemText\n                      primary={remark.user_name}\n                      secondary={\n                        <p className=\"mb-0\">\n                          {remark.remarks}{\" \"}\n                          <span className=\"float-right\">{remark.datetime}</span>\n                        </p>\n                      }\n                    />\n                  </ListItem>\n                );\n              })}\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={toggleRemarks} color=\"primary\">\n            Close\n          </Button>\n          <Button\n            onClick={saveRemarks}\n            disabled={\n              remarks.remarks == \"\" || remarks.status_id == \"\" || loading\n            }\n            color=\"primary\"\n          >\n            Save\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <div style={{ height: 400, width: \"100%\" }}>\n        <DataGrid\n          columns={[\n            {\n              field: \"id\",\n              headerName: \"Sr. no\",\n              width: 80,\n            },\n            {\n              field: \"date\",\n              headerName: \"Date\",\n              width: 100,\n              renderCell: (params) => {\n                return moment(params.row.date).format(\"DD/MM/yyyy\");\n              },\n            },\n            {\n              field: \"enquiry_no\",\n              headerName: \"Enquiry No\",\n              width: 120,\n            },\n            {\n              field: \"company_id\",\n              headerName: \"Comp Id\",\n              width: 100,\n            },\n            {\n              field: \"company_name\",\n              headerName: \"Company Name\",\n              width: 200,\n            },\n            {\n              field: \"description\",\n              headerName: \"Description\",\n              width: 200,\n            },\n            {\n              field: \"type\",\n              headerName: \"Type\",\n              width: 100,\n            },\n            {\n              field: \"priority_name\",\n              headerName: \"Priority Name\",\n              width: 100,\n            },\n            {\n              field: \"reference_name\",\n              headerName: \"Reference\",\n              width: 120,\n            },\n            {\n              field: \"status\",\n              headerName: \"Status\",\n              width: 100,\n            },\n            {\n              field: \"employee_name\",\n              headerName: \"Employee Name\",\n              width: 150,\n            },\n            {\n              field: \"mark_engg\",\n              headerName: \"Marketing Eng.\",\n              width: 150,\n            },\n            {\n              field: \"remarks\",\n              headerName: \"Remarks\",\n              width: 150,\n              renderCell: (param) => {\n                return (\n                  <>\n                    {remarkLoading ? (\n                      <img src=\"/asset/images/circle.gif\" width={20} />\n                    ) : (\n                      <Button\n                        className=\"text-lowercase\"\n                        color=\"primary\"\n                        onClick={() => {\n                          getRemarkList(param.row.tran_id);\n                        }}\n                      >\n                        {param.row.remarks}\n                      </Button>\n                    )}\n                  </>\n                );\n              },\n            },\n\n            {\n              field: \"\",\n              headerName: \"Actions\",\n              renderCell: (params) => (\n                <ActionButtons\n                  onPreview={\n                    getBrowseUserRight(getuserRightListResponse)?.view_right ==\n                    \"True\"\n                      ? () => handleEdit(params.row.id)\n                      : null\n                  }\n                  onEdit={\n                    getBrowseUserRight(getuserRightListResponse)?.edit_button ==\n                    \"True\"\n                      ? () => handleEdit(params.row.id)\n                      : null\n                  }\n                  onDelete={\n                    getBrowseUserRight(getuserRightListResponse)\n                      ?.delete_right == \"True\"\n                      ? () => handleDeleteRow(params.row.id)\n                      : null\n                  }\n                />\n              ),\n              width: 100,\n            },\n          ]}\n          pagination\n          disableColumnFilter\n          pageSize={params.pageSize}\n          page={params.pageNo}\n          rowsPerPageOptions={[10, 15, 25, 100]}\n          rowCount={totalRecord}\n          paginationMode=\"server\"\n          onPageSizeChange={handlePageSizeChange}\n          onPageChange={handlePageChange}\n          loading={loading}\n          rowHeight={30}\n          //components={{\n          //Pagination: CustomPagination,\n          //NoRowsOverlay: CustomNoRowsOverlay,\n          //       }}\n          onSortModelChange={(sort) => {\n            if (sort.length > 0) {\n              setParams({\n                ...params,\n                sort_column: sort[0].field,\n                sort_order: sort[0].sort,\n              });\n            }\n          }}\n          rows={browseListData}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default SalesIssueBrowse;\n"]},"metadata":{},"sourceType":"module"}