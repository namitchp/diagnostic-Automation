{"ast":null,"code":"import React,{useEffect}from'react';import MainLayout from'../layouts/layout';import CircularProgress from'@material-ui/core/CircularProgress';import{useDispatch,useSelector}from'react-redux';import{checkAuthOTP,getDecryptUserId}from'../_redux/actions/auth.action';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SwitchApp=function SwitchApp(props){var isAuthorisedByUrl=new URLSearchParams(props.location.search).get(\"token\");var dispatch=useDispatch();var getDecryptUserDetailsResponse=useSelector(function(state){return state.auth.decryptUserDetails;});var checkAuthOtpResponse=useSelector(function(state){return state.auth.getOtpResponse;});useEffect(function(){if(isAuthorisedByUrl){var param={encrypt_user_id:isAuthorisedByUrl};dispatch(getDecryptUserId(param));}else{window.location=\"/\";}},[isAuthorisedByUrl]);useEffect(function(){if(getDecryptUserDetailsResponse){console.log(getDecryptUserDetailsResponse);var login=\"grant_type=password&username=\".concat(getDecryptUserDetailsResponse.user_name,\"&password=\").concat(getDecryptUserDetailsResponse.password);dispatch(checkAuthOTP(login));}},[getDecryptUserDetailsResponse]);useEffect(function(){if(!(Object.keys(checkAuthOtpResponse).length===0&&checkAuthOtpResponse.constructor===Object)){if(checkAuthOtpResponse.valid){localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);localStorage.setItem(\"login\",checkAuthOtpResponse.valid);localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);localStorage.setItem(\"code\",checkAuthOtpResponse.code);localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);window.location=\"/\";}}},[checkAuthOtpResponse]);return/*#__PURE__*/_jsx(\"div\",{className:\"switch_loader\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Please wait....\"})]})});};export default SwitchApp;","map":{"version":3,"names":["React","useEffect","MainLayout","CircularProgress","useDispatch","useSelector","checkAuthOTP","getDecryptUserId","SwitchApp","props","isAuthorisedByUrl","URLSearchParams","location","search","get","dispatch","getDecryptUserDetailsResponse","state","auth","decryptUserDetails","checkAuthOtpResponse","getOtpResponse","param","encrypt_user_id","window","console","log","login","user_name","password","Object","keys","length","constructor","valid","localStorage","setItem","access_token","userName","userId","code","encrypt_userId"],"sources":["F:/React code/diagnostic/src/pages/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport MainLayout from '../layouts/layout';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { checkAuthOTP, getDecryptUserId } from '../_redux/actions/auth.action';\r\n\r\n\r\n\r\n\r\nconst SwitchApp = (props) => {\r\nconst isAuthorisedByUrl = new URLSearchParams(props.location.search).get(\"token\");\r\nconst dispatch = useDispatch();\r\nconst getDecryptUserDetailsResponse = useSelector((state) => state.auth.decryptUserDetails);\r\nconst checkAuthOtpResponse = useSelector((state) => state.auth.getOtpResponse);\r\n\r\nuseEffect(() => {\r\n    if(isAuthorisedByUrl){\r\n        const param = {\r\n            encrypt_user_id:isAuthorisedByUrl\r\n        }\r\n        dispatch(getDecryptUserId(param));\r\n    }\r\n    else{\r\n        window.location = \"/\";\r\n    }\r\n},[isAuthorisedByUrl]);\r\n\r\n\r\nuseEffect(() => {\r\n    if(getDecryptUserDetailsResponse){\r\n        console.log(getDecryptUserDetailsResponse);\r\n        var login = `grant_type=password&username=${getDecryptUserDetailsResponse.user_name}&password=${getDecryptUserDetailsResponse.password}`;\r\n        dispatch(checkAuthOTP(login));\r\n    }\r\n},[getDecryptUserDetailsResponse]);\r\n\r\nuseEffect(() => {\r\n    if(!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)){\r\n        if(checkAuthOtpResponse.valid){\r\n            localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);\r\n            localStorage.setItem(\"login\",checkAuthOtpResponse.valid);\r\n            localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);\r\n            localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);\r\n            localStorage.setItem(\"code\",checkAuthOtpResponse.code);\r\n            localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);\r\n            window.location = \"/\";\r\n        }\r\n    }\r\n},[checkAuthOtpResponse])\r\n\r\n\r\n    return  <div className=\"switch_loader\">\r\n            <div>\r\n                <CircularProgress />\r\n                <h4>Please wait....</h4>\r\n            </div>\r\n    </div>\r\n\r\n}\r\n\r\nexport default SwitchApp;"],"mappings":"AAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAOC,WAAU,KAAM,mBAAmB,CAC1C,MAAOC,iBAAgB,KAAM,oCAAoC,CACjE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,YAAY,CAAEC,gBAAgB,KAAQ,+BAA+B,CAAC,wFAK/E,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAK,CAAK,CAC7B,GAAMC,kBAAiB,CAAG,GAAIC,gBAAe,CAACF,KAAK,CAACG,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,OAAO,CAAC,CACjF,GAAMC,SAAQ,CAAGX,WAAW,EAAE,CAC9B,GAAMY,8BAA6B,CAAGX,WAAW,CAAC,SAACY,KAAK,QAAKA,MAAK,CAACC,IAAI,CAACC,kBAAkB,GAAC,CAC3F,GAAMC,qBAAoB,CAAGf,WAAW,CAAC,SAACY,KAAK,QAAKA,MAAK,CAACC,IAAI,CAACG,cAAc,GAAC,CAE9EpB,SAAS,CAAC,UAAM,CACZ,GAAGS,iBAAiB,CAAC,CACjB,GAAMY,MAAK,CAAG,CACVC,eAAe,CAACb,iBACpB,CAAC,CACDK,QAAQ,CAACR,gBAAgB,CAACe,KAAK,CAAC,CAAC,CACrC,CAAC,IACG,CACAE,MAAM,CAACZ,QAAQ,CAAG,GAAG,CACzB,CACJ,CAAC,CAAC,CAACF,iBAAiB,CAAC,CAAC,CAGtBT,SAAS,CAAC,UAAM,CACZ,GAAGe,6BAA6B,CAAC,CAC7BS,OAAO,CAACC,GAAG,CAACV,6BAA6B,CAAC,CAC1C,GAAIW,MAAK,wCAAmCX,6BAA6B,CAACY,SAAS,sBAAaZ,6BAA6B,CAACa,QAAQ,CAAE,CACxId,QAAQ,CAACT,YAAY,CAACqB,KAAK,CAAC,CAAC,CACjC,CACJ,CAAC,CAAC,CAACX,6BAA6B,CAAC,CAAC,CAElCf,SAAS,CAAC,UAAM,CACZ,GAAG,EAAE6B,MAAM,CAACC,IAAI,CAACX,oBAAoB,CAAC,CAACY,MAAM,GAAK,CAAC,EAAIZ,oBAAoB,CAACa,WAAW,GAAKH,MAAM,CAAC,CAAC,CAChG,GAAGV,oBAAoB,CAACc,KAAK,CAAC,CAC1BC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAChB,oBAAoB,CAACiB,YAAY,CAAC,CAC/DF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAChB,oBAAoB,CAACc,KAAK,CAAC,CACxDC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAChB,oBAAoB,CAACkB,QAAQ,CAAC,CAC9DH,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAChB,oBAAoB,CAACmB,MAAM,CAAC,CAC1DJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAChB,oBAAoB,CAACoB,IAAI,CAAC,CACtDL,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAChB,oBAAoB,CAACqB,cAAc,CAAC,CAC1EjB,MAAM,CAACZ,QAAQ,CAAG,GAAG,CACzB,CACJ,CACJ,CAAC,CAAC,CAACQ,oBAAoB,CAAC,CAAC,CAGrB,mBAAQ,YAAK,SAAS,CAAC,eAAe,uBAC9B,oCACI,KAAC,gBAAgB,IAAG,cACpB,oBAAI,iBAAe,EAAK,GACtB,EACR,CAEV,CAAC,CAED,cAAeZ,UAAS"},"metadata":{},"sourceType":"module"}